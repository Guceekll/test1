
ユーザー
 │
 │ ①リクエスト入力
 ▼
Planning（計画層）
 │─ 要求を解析 → Plan / 複数の PlanStep を生成
 │─ 必要に応じて State（ブラックボード）から過去のコンテキストを参照
 │─ 必要な Capabilities を選択
 │─ 外部サービスが必要な場合 → Resources（LLM / API / DB） または MCP を利用
 ▼
Execution（実行層）
 │─ 各 PlanStep を順番または戦略に従って実行
 │    ├─ Reasoning（推論）を呼び出して「どのように実行するか」を決定
 │    ├─ ツールが必要な場合 → Tool Calling を使用
 │    │      ├─ Resources（LLM / API / DB）を直接呼び出す
 │    │      └─ MCP Resource を経由して呼び出す
 │    ├─ 複数のリソースがある場合 → Smart Resource が最適なものを選択
 │    └─ 中間結果を State（ブラックボード / メモリ）に書き込む
 ▼
State Mgmt（状態管理 / ブラックボード / メモリ）
 │─ ユーザー入力、ステップ結果、コンテキスト、メモリ（短期 / 長期 / 永続）を保存
 │─ 後続ステップや次回リクエスト時に参照可能
 ▼
Reasoning（推論層）
 │─ 現在のコンテキストと能力に基づき、各ステップの具体的なアクションを生成
 │─ 必要に応じて Resources / MCP を再利用
 ▼
出力結果
 │─ 最終結果を返す（計画のまとめ / レポート / 分析結果など）
 ▼
